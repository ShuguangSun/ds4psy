---
title: "Datasets (ds4psy)"
author: "Hansjörg Neth, SPDS, uni.kn"
date: "2018 11 19"
output:
   rmdformats::html_clean: # html_clean html_docco readthedown material #
     code_folding: show # hide
     toc_float: true
     toc_depth: 2
     highlight: default # textmate default kate haddock monochrome #
     lightbox: true # true by default
     fig_width: 8 # in inches
editor_options: 
  chunk_output_type: console # inline
---

<!-- Example of essential commands | ds4psy: Summer 2018 -->

```{r preamble, echo = FALSE, eval = TRUE, cache = FALSE, message = FALSE, warning = FALSE}
## (a) Housekeeping: -----
rm(list=ls()) # clean all.

## (b) Current file name and path: ----- 
# cur.path <- dirname(rstudioapi::getActiveDocumentContext()$path)
# cur.path
# setwd(cur.path) # set to current directory
setwd("~/Desktop/stuff/Dropbox/_code/R/_teachR/ds4psy/_essentials") # set to current directory
# list.files() # all files + folders in current directory
fileName <- "datasets.Rmd"

## (c) Packages: ----- 
library(knitr)
library(rmdformats)
library(tidyverse)

## (d) Global options: ----- 
options(max.print = "75")
opts_chunk$set(echo = TRUE,
	             cache = TRUE,
               prompt = FALSE,
               tidy = FALSE,
               collapse = TRUE, # set TRUE in answers 
               comment = "#>",
               message = FALSE,
               warning = FALSE,
               ## Default figure options:
               fig.width = 6, 
               fig.asp = .618, # golden ratio
               out.width = "75%",
               fig.align = "center"
               )
opts_knit$set(width = 75)

## (e) Graphics: ----- 

# Defining colors:
seeblau <- rgb(0, 169, 224, names = "seeblau", maxColorValue = 255) # seeblau.4 (non-transparent)

seeblau.colors <- c(rgb(204, 238, 249, maxColorValue = 255), # seeblau.1
                    rgb(166, 225, 244, maxColorValue = 255), # seeblau.2 
                    rgb(89, 199, 235, maxColorValue = 255),  # seeblau.3
                    rgb(0, 169, 224, maxColorValue = 255),   # seeblau.4 
                    rgb(0, 0, 0, maxColorValue = 255),       #  5. black
                    gray(level = 0, alpha = .6),             #  6. gray 60% transparent
                    gray(level = 0, alpha = .4),             #  7. gray 40% transparent
                    gray(level = 0, alpha = .2),             #  8. gray 20% transparent
                    gray(level = 0, alpha = .1),             #  9. gray 10% transparent
                    rgb(255, 255, 255, maxColorValue = 255)  # 10. white
                    )

unikn.pal = data.frame(                             ## in one df (for the yarrr package): 
  "seeblau1" = rgb(204, 238, 249, maxColorValue = 255), #  1. seeblau1 (non-transparent)
  "seeblau2" = rgb(166, 225, 244, maxColorValue = 255), #  2. seeblau2 (non-transparent)
  "seeblau3" = rgb( 89, 199, 235, maxColorValue = 255), #  3. seeblau3 (non-transparent)
  "seeblau4" = rgb(  0, 169, 224, maxColorValue = 255), #  4. seeblau4 (= seeblau base color)
  "black"    = rgb(  0,   0,   0, maxColorValue = 255), #  5. black
  "seegrau4" = rgb(102, 102, 102, maxColorValue = 255), #  6. grey40 (non-transparent)
  "seegrau3" = rgb(153, 153, 153, maxColorValue = 255), #  7. grey60 (non-transparent)
  "seegrau2" = rgb(204, 204, 204, maxColorValue = 255), #  8. grey80 (non-transparent)
  "seegrau1" = rgb(229, 229, 229, maxColorValue = 255), #  9. grey90 (non-transparent)
  "white"    = rgb(255, 255, 255, maxColorValue = 255), # 10. white
  stringsAsFactors = FALSE)

## (f) Counters: ----- 
nr <- 0  # task number
pt <- 0  # point total
```

# Introduction

## Content

This file contains descriptions of **datasets** used in this course and their sources. 

## Course coordinates

<!-- uni.kn logo and link to SPDS: -->  
<!-- ![](./inst/pix/uniKn_logo.png) --> 
<a href="https://www.spds.uni-konstanz.de/">
<img src = "../inst/pix/uniKn_logo.png" alt = "spds.uni.kn" align = "right" width = "300" style = "width: 300px; float: right; border:20;"/>
<!-- <img src = "./inst/pix/uniKn_logo_s.png" alt = "spds.uni.kn" style = "float: right; border:20;"/> --> 
</a>

* Taught at the [University of Konstanz](https://www.uni-konstanz.de/) by [Hansjörg Neth](http://neth.de/) (<h.neth@uni.kn>,  [SPDS](https://www.spds.uni-konstanz.de/), office D507).
* Winter 2018/2019: Mondays, 13:30--15:00, C511. 
* Links to current [course syllabus](http://rpository.com/ds4psy/) | [ZeUS](https://zeus.uni-konstanz.de/hioserver/pages/startFlow.xhtml?_flowId=detailView-flow&unitId=5101&periodId=78&navigationPosition=hisinoneLehrorganisation,examEventOverviewOwn) |  [Ilias](https://ilias.uni-konstanz.de/ilias/goto_ilias_uni_crs_809936.html) 


# Datasets

## 1. Positive psychology

### Introduction 

<!-- Motivation: State topic, research question, and contents of data: --> 

In a 
Seligman, Steen, Park, and Peterson (2005) suggested that positive psychology interventions (PPIs) contain specific, powerful, therapeutic ingredients that effect greater increases in happiness and reductions in depression than a placebo control. 

The study by Woodworth et al. (2017) re-examined the three PPIs that Seligman et al. found to be most effective when delivered over the internet. 

### Data sources

Articles reporting original research:

- Seligman, M. E., Steen, T. A., Park, N., & Peterson, C. (2005). 
Positive psychology progress: Empirical validation of interventions. 
_American Psychologist_, _60_(5), 410--421. 
doi: <https://doi.org/10.1037/0003-066X.60.5.410> 

- Woodworth, R. J., O'Brien‐Malone, A., Diamond, M. R., & Schüz, B. (2017). 
Web‐based positive psychology interventions: A reexamination of effectiveness. 
_Journal of Clinical Psychology_, _73_(3), 218--232. 
doi: <https://doi.org/10.1002/jclp.22328>


Article on data used here: 

- Woodworth, R. J., O’Brien-Malone, A., Diamond, M. R. and Schüz, B. (2018). 
Data from, ‘Web-based Positive Psychology Interventions: A Reexamination of Effectiveness’. 
_Journal of Open Psychology Data_, _6_: 1. 
doi: <https://doi.org/10.5334/jopd.35> 

- See <https://openpsychologydata.metajnl.com/articles/10.5334/jopd.35/> for details. 

- The dataset is available from figshare at <https://doi.org/10.6084/m9.figshare.1577563.v1>.


### Codebook

Description of the variables and values contained in the 2 original data files:

#### 1. File `posPsy_participants.csv`

The file `posPsy_participants.csv` contains 6 variables with _demographic information_ on 295 participants: 

1. `id`: participant ID

2. `intervention`: 3 positive psychology interventions (PPIs), plus 1 control condition: 

    - 1 = “Using signature strengths”, 
    - 2 = “Three good things”, 
    - 3 = “Gratitude visit”, 
    - 4 = “Recording early memories” (control condition).  

3. `sex`: 

    - 1 = female, 
    - 2 = male. 

4. `age`: participant's age (in years). 

5. `educ`: level of education:  

    - 1 = Less than Year 12, 
    - 2 = Year 12,
    - 3 = Vocational training, 
    - 4 = Bachelor’s degree, 
    - 5 = Postgraduate degree.

6. `income`: 

    - 1 = below average, 
    - 2 = average, 
    - 3 = above average.
    

#### 2. File `posPsy_AHI_CESD.csv`

The file `posPsy_AHI_CESD.csv` contains data of the 24 items of the _Authentic Happiness Inventory_ (AHI) and answers to the 20 items of the _Center for Epidemiological Studies Depression_ (CES-D) scale for multiple (up to 6) measurement occasions: 

1. `id`: Particpant ID

2. `occasion`: Measurement occasion: 

    - 0 = Pretest (i.e., at enrolment), 
    - 1 = Posttest (i.e., 7 days after pretest), 
    - 2 = 1-week follow-up, (i.e., 14 days after pretest, 7 days after posttest), 
    - 3 = 1-month follow-up, (i.e., 38 days after pretest, 31 days after posttest), 
    - 4 = 3-month follow-up, (i.e., 98 days after pretest, 91 days after posttest), 
    - 5 = 6-month follow-up, (i.e., 189 days after pretest, 182 days after posttest).

3. `elapsed.days`: Time since enrolment measured in fractional days	

4. `intervention`: Intervention group (1 to 4)

5. `ahi01`--`ahi24`: Responses on 24 AHI items

6. `cesd01`--`cesd20`: Responses on 20 CES-D items

7. `ahiTotal`: Total AHI score

8. `cesdTotal`: Total CES-D score


### Getting the data

#### Files available

The following files were generated from the original data files (and saved in `.csv` format): 

1. `posPsy_participants.csv`: Original participant data (295 x 6 variables):   
<http://rpository.com/ds4psy/data/posPsy_participants.csv>.   

2. `posPsy_AHI_CESD.csv`: Original data of dependent measures in _long_ format (992 x 50 variables):   
<http://rpository.com/ds4psy/data/posPsy_AHI_CESD.csv>.   

3. `posPsy_AHI_CESD_corrected.csv`: Corrected version of dependent measures in _long_ format (990 x 50 variables):  
<http://rpository.com/ds4psy/data/posPsy_AHI_CESD_corrected.csv>.   

4. `posPsy_data_wide.csv`: Corrected version of all data joined in _wide_ format (295 x 294 variables):   
<http://rpository.com/ds4psy/data/posPsy_data_wide.csv>.   
Different measurement occasions are suffixed by `.0`, `.1`, ..., `.5`.  

#### Loading data

We can load data stored in `csv`-format into R by using the `read_csv` command (from the `readr` package, which is part of the `tidyverse`). Here, we obtain the data files from online sources (at <http://rpository.com/ds4psy/>): 

```{r read_posPsy_data, echo = TRUE, eval = TRUE}
library(readr)

# 1. Participant data: 
p_info <- read_csv(file = "http://rpository.com/ds4psy/data/posPsy_participants.csv")  # online
dim(p_info)  # 295 x 6 

# 2. Original DVs in long format:
AHI_CESD <- read_csv(file = "http://rpository.com/ds4psy/data/posPsy_AHI_CESD.csv")  # online
dim(AHI_CESD)  # 992 x 50

# 3. Corrected DVs in long format:
AHI_CESD_2 <- read_csv(file = "http://rpository.com/ds4psy/data/posPsy_AHI_CESD_corrected.csv")  # online
dim(AHI_CESD_2)  # 990 x 50

# 4. Corrected version of all data in wide format: 
data_wide <- read_csv(file = "http://rpository.com/ds4psy/data/posPsy_data_wide.csv")  # online
dim(data_wide)  # 295 x 294 
```

### References

- Seligman, M. E., Steen, T. A., Park, N., & Peterson, C. (2005). 
Positive psychology progress: Empirical validation of interventions. 
_American Psychologist_, _60_(5), 410--421.

- Woodworth, R. J., O'Brien‐Malone, A., Diamond, M. R., & Schüz, B. (2017). 
Web‐based positive psychology interventions: A reexamination of effectiveness. 
_Journal of Clinical Psychology_, _73_(3), 218--232.

- Woodworth, R. J., O’Brien-Malone, A., Diamond, M. R. and Schüz, B. (2018). 
Data from, ‘Web-based positive psychology interventions: A reexamination of effectiveness’. 
_Journal of Open Psychology Data_, _6_: 1. DOI: <https://doi.org/10.5334/jopd.35> 

- Data at <https://doi.org/10.6084/m9.figshare.1577563.v1>.


## 2. False positive psychology

### Introduction

To highlight problematic research practices within psychology, Simmons, Nelson and Simonsohn (2011) published a controversial article with a necessarily false finding. By conducting simulations and 2 simple behavioral experiments, they show that flexibility in data collection, analysis, and reporting dramatically increases the rate of false-positive findings.

### Data sources

Articles reporting original research:

- Simmons, J.P., Nelson, L.D., & Simonsohn, U. (2011). 
False-positive psychology: Undisclosed flexibility in data collection and analysis allows presenting anything as significant. 
_Psychological Science_, _22_(11), 1359–1366. 
doi: <https://doi.org/10.1177/0956797611417632> 

Article on data used here: 

- Simmons, J.P., Nelson, L.D., & Simonsohn, U. (2014). 
Data from paper “False-Positive Psychology: Undisclosed Flexibility in Data Collection and Analysis Allows Presenting Anything as Significant”. 
_Journal of Open Psychology Data_, _2_(1), e1. 
doi: <http://doi.org/10.5334/jopd.aa>

See: <https://openpsychologydata.metajnl.com/articles/10.5334/jopd.aa/> for data. 


### Codebook

The study data is stored in 2 seperate files: `study1.xlsx` & `study2.xlsx`. Both data files contain the same information about each participant in 17 variables: 

1. `age`: Days since participant was born (based on their self-reported birthday)  

2. `dad`: Father's age in years  

3. `mom`: Mother's age in years

4. `female`: Is the participant a woman? 
    + 1 = yes 
    + 2 = no

5. `root`: Did they geht correctly the square root of 100? 
    + 1 = yes 
    + 2 = no

6. `bird`: Imagine a restaurant you really like offered a 30% discount for dining between 4 pm and 6 pm.  How likely would you be to take advantage of that offer?
    + 1 = very unlikely to 7 = very likely

7. `political`: In the political spectrum, where would you place yourself?   
    + 1 = very liberal    
    + 2 = liberal   
    + 3 = centrist   
    + 4 = conservative   
    + 5 = very conservative   

8. `quarterback`: If you had to guess who was chosen the quarterback of the year in Canada last year, which of the following four options would you choose? 
    + 1 = Dalton Bell 
    + 2 = Daryll Clark 
    + 3 = Jarious Jackson 
    + 4 = Frank Wilczynski

9. `olddays`: How often have you referred to some past part of your life as "the good old days"? 
    + 11 = Never
    + 12 = almost never
    + 13 = sometimes
    + 14 = often
    + 15 = very often

10. `potato`: Did the participant hear the song 'Hot Potato' by the Australian band The Wiggles? 
    + 1 = yes 
    + 2 = no

11. `when64`: Did the participant hear the song 'When I am 64' by the Beatles?
    + 1 = yes 
    + 2 = no

12. `kalimba`: Did the participant hear the song 'Kalimba' by Mr. Scrub?
    + 1 = yes 
    + 2 = no

13. `feelold`: How old do you feel?
    + 1 = very young
    + 2 = young
    + 3 = neither young nor old
    + 4 = old
    + 5 = very old

14. `computer`: Computers are complicated machines 
    + 1 = strongly disagree to 5 = strongly agree

15. `diner`: Imagine you were going to a diner for dinner tonight, how much do you think you would like the food?  
    + 1 = dislike extremely to 9 = like extremely

16. `cond`: In which condition was the participant?
    + control = Suject heard the song 'Kalimba' by Mr. Scrub
    + potato = Subject heard the song 'Hot Potato' by the Australian band The Wiggles
    + 64 = Subject heard the song 'When I am 64' by the Beatles

17. `aged365`: age in years 


### Getting the data

#### Files available

The following file was generated from the original data files (and saved in `.csv` format): 

1. `falsePosPsy_all.csv`: Combines the 2 original datasets in one file:      
<http://rpository.com/ds4psy/data/falsePosPsy_all.csv>.     
2 variables that denote the original study (1 vs. 2) and a unique participant `ID` (ranging from 1 to 78) have been added, so that the data file now contains 78 cases and 19 variables. 
 
 
#### Loading data

```{r load_falsePosPsy_data}
falsePosPsy_data <- read_csv(file = "http://rpository.com/ds4psy/data/falsePosPsy_all.csv")  # online

# Check: 
dim(falsePosPsy_data)  # 78 x 19 

# Any missing values? 
sum(is.na(falsePosPsy_data))  # 0 (i.e., no missing values).  
```

<!-- +++ here now +++ --> 

### References

- Simmons, J.P., Nelson, L.D., & Simonsohn, U. (2011). 
False-positive psychology: Undisclosed flexibility in data collection and analysis allows presenting anything as significant. 
_Psychological Science_, _22_(11), 1359–1366. 
doi: <https://doi.org/10.1177/0956797611417632> 

- Simmons, J.P., Nelson, L.D., & Simonsohn, U. (2014). 
Data from paper “False-Positive Psychology: Undisclosed Flexibility in Data Collection and Analysis Allows Presenting Anything as Significant”. 
_Journal of Open Psychology Data_, _2_(1), e1. 
doi: <http://doi.org/10.5334/jopd.aa>

- Data at <https://openpsychologydata.metajnl.com/articles/10.5334/jopd.aa/>. 


# Other sources

## Data in base R

Every version of R comes with a collection of datasets: 

```{r base_R_datasets, echo = TRUE, eval = FALSE}
## Get info on included datasets: 
library(help = "datasets") 

## Check some dimensions: ----- 
# dim(ChickWeight)
# dim(iris)
# Nile           # Time series. See plot(Nile)
# dim(sleep)     # Student's Sleep Data
# dim(Titanic)   # also see dim(FFTrees::titanic)
```


## Data in R packages

Packages of the `tidyverse`:

- `dplyr`: `starwars`
- `ggplot2`: `diamonds`, `mpg`, `msleep`, etc. 
- `tidyr`: `table1`, etc. 

Other packages with large data sets include:

- `babynames`
- `dslabs`
- `eurostat`
- `FFTrees`: `breastcancer`, `car`, `heartdisease`, `mushrooms`, `titanic`, `wine`
- `ISLR` 
- `MASS`
- `nycflights13`
- `yarrr`: `pirates`, `movies`, `auction`, etc. 


## Online sources

The web is full of data, of course, but most of it needs sound data science and a sound dose of scepticism to be of any use. Here are some good starting points for finding free data: 

Collections:

- [Google dataset search](https://toolbox.google.com/datasetsearch)  

- [Kaggle](https://www.kaggle.com): A place for data science projects (with many large datasets)  

Specific datasets: 

- [PanTHERIA](http://esapubs.org/archive/ecol/E090/184/): A species-level database of life history, ecology, and geography of extant and recently extinct mammals  


[Last update on `r Sys.time()` by [hn](http://neth.de/).]  

<!-- eof. --> 